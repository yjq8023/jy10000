"use strict";(self.webpackChunkzmn_rx_oms_web=self.webpackChunkzmn_rx_oms_web||[]).push([[273],{59273:function(e,n,i){i.r(n);var o=i(1413),r=i(15861),t=i(29439),l=i(87757),d=i.n(l),u=i(72791),a=i(43504),v=i(8008),s=i(35796),c=i(14705),p=i(50276),f=i(14614),y=i(1620),m=i(86511),Z=i(95593),S=i(1072),h=i(36852),I=i(72345),g=i(13317),x=i(37942),b=i(19995),C=i(40445),T=i(90252),j=i(89672),k=i(7711),w=i(80184),N=v.Modal.confirm,_={timeout:!0,begin_delivery:!0,delivery_exception:!0,wait:!0};n.default=function(){var e,n,i,l,v,U,P,A,M,L,z,D,O,R,q,E,F,G,V,B,H,J,K,Q,W,X,Y,$=(0,u.useState)(!1),ee=(0,t.Z)($,2),ne=ee[0],ie=ee[1],oe=(0,T.V)().dictList,re=(0,a.lr)(),te=(0,t.Z)(re,1)[0].getAll("id")[0],le=(0,j.z5)(te,ne),de=le.interaction,ue=le.interactionTip,ae=le.avoid,ve=le.avoidTip,se=le.beyondIndication,ce=le.repeatMedication,pe=le.repeatMedicationTip,fe=le.remarkCode,ye=le.errorCode,me="orderSearch",Ze=(0,u.useState)(te),Se=(0,t.Z)(Ze,2),he=Se[0],Ie=Se[1],ge=(0,u.useState)(),xe=(0,t.Z)(ge,2),be=xe[0],Ce=xe[1],Te=(0,u.useState)(!1),je=(0,t.Z)(Te,2),ke=je[0],we=je[1],Ne=(0,u.useState)({}),_e=(0,t.Z)(Ne,2),Ue=_e[0],Pe=_e[1],Ae=(0,u.useState)({pageNo:1,pageSize:50,entity:{},orders:[{property:"create_time",direction:"desc"}]}),Me=(0,t.Z)(Ae,2),Le=Me[0],ze=Me[1],De=(0,C.G)(Le,"concat"),Oe=De.total,Re=De.orderSource,qe=De.isLoading;function Ee(){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,r.Z)(d().mark((function e(){var n,i,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:"",e.next=3,(0,b.gU)(n||he);case 3:i=e.sent,Ce(i),Ie(n||he),window.history.pushState(null,"","?id=".concat(n||he));case 7:case"end":return e.stop()}}),e)}))),Fe.apply(this,arguments)}function Ge(){return(Ge=(0,r.Z)(d().mark((function e(n){var i,r,t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,b.Ot)(n);case 3:i=e.sent,r=i.common_name,t=i.content,we(!0),Pe((0,o.Z)({commonName:r},t)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),we(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return(0,u.useEffect)((function(){Ee()}),[te]),(0,w.jsxs)("div",{className:k.Z["order-container"],children:[(0,w.jsx)(h.Z,{list:Re,loading:qe,delivDict:oe?oe.deliveryStatus:{},total:Oe,id:he,formType:me,onScroll:function(){ze((0,o.Z)((0,o.Z)({},Le),{},{pageNo:Le.pageNo+1}))},onChange:function(e){Ee(e)},onSearch:function(e){ze((0,o.Z)((0,o.Z)({},Le),{},{pageNo:1,entity:(0,o.Z)((0,o.Z)({},Le.entity),{},{simpleSearch:e})}))}}),(0,w.jsxs)("div",{className:k.Z["perscript-container"],children:[(0,w.jsx)(g.Z,{breadcrumbMap:[{label:"\u5904\u65b9\u6d41\u8f6c"},{label:"\u7cfb\u7edf\u5206\u6790"},{label:"\u8ba2\u5355\u67e5\u8be2",link:"/system/order/tracking"},{label:"\u8ba2\u5355\u8be6\u60c5"}],link:"/system/order/tracking"}),(0,w.jsx)(I.Z,{clas:k.Z.mb12,patient:null===be||void 0===be?void 0:be.patientInfo,delivery:null===be||void 0===be?void 0:be.deliveryInfo}),(0,w.jsxs)("div",{className:k.Z.container,children:[(0,w.jsxs)("div",{className:"".concat(k.Z["left-container"]," ").concat(null!==be&&void 0!==be&&be.currentStatus&&!_[null===be||void 0===be?void 0:be.currentStatus]?k.Z["left-container-calc"]:""),children:[(0,w.jsx)(y.Z,{clas:k.Z.mb12,id:null===be||void 0===be||null===(e=be.orderInfo)||void 0===e?void 0:e.id,processStatus:null===be||void 0===be?void 0:be.processStatus,receiveTime:null===be||void 0===be||null===(n=be.orderInfo)||void 0===n?void 0:n.receiveTime,doctor:null===be||void 0===be||null===(i=be.prescriptionInfo)||void 0===i?void 0:i.doctor,pCreateTime:null===be||void 0===be||null===(l=be.orderInfo)||void 0===l?void 0:l.createTime,dispensePharmacist:null===be||void 0===be||null===(v=be.prescriptionInfo)||void 0===v?void 0:v.dispensePharmacist,createTime:null===be||void 0===be||null===(U=be.deliveryInfo)||void 0===U?void 0:U.updateTime,auditPharmacist:null===be||void 0===be||null===(P=be.prescriptionInfo)||void 0===P?void 0:P.auditPharmacist,deliveryUser:null===be||void 0===be||null===(A=be.deliveryInfo)||void 0===A?void 0:A.deliveryUser,signTime:null===be||void 0===be||null===(M=be.deliveryInfo)||void 0===M?void 0:M.signTime,signUser:null===be||void 0===be||null===(L=be.deliveryInfo)||void 0===L?void 0:L.signUser,currentStatus:null===be||void 0===be?void 0:be.currentStatus,message:null===be||void 0===be||null===(z=be.orderInfo)||void 0===z?void 0:z.message,invalidReason:null===be||void 0===be||null===(D=be.orderInfo)||void 0===D?void 0:D.invalidReason,deliveryCategory:null===be||void 0===be||null===(O=be.orderInfo)||void 0===O?void 0:O.deliveryCategory,formType:me,currentStatusDict:oe?null===oe||void 0===oe?void 0:oe.OrderCurrentStatus:{}}),(0,w.jsx)(f.Z,{clas:k.Z.mb12,totalAmount:null===be||void 0===be||null===(R=be.orderInfo)||void 0===R?void 0:R.totalAmount,deliveryAmount:null===be||void 0===be||null===(q=be.orderInfo)||void 0===q?void 0:q.deliveryAmount,drugList:null===be||void 0===be||null===(E=be.prescriptionInfo)||void 0===E?void 0:E.drugList,currentStatus:null===be||void 0===be?void 0:be.currentStatus,drugFrequency:oe&&oe.drugFrequency,drugUsage:oe?null===oe||void 0===oe?void 0:oe.drugUsage:{}}),(0,w.jsx)(S.Z,{clas:k.Z.mb12,currentStatus:null===be||void 0===be?void 0:be.currentStatus,interaction:de||[],interactionTip:ue,avoid:ae||[],avoidTip:ve,beyondIndication:se||[],repeatMedication:ce||[],repeatMedicationTip:pe,remarkCode:fe,errorCode:ye,onDrug:function(e){return function(e){return Ge.apply(this,arguments)}(e)},onReload:function(){return ie(!ne)}}),(0,w.jsx)(p.Z,{receiptInfo:{toName:null===be||void 0===be||null===(F=be.deliveryInfo)||void 0===F?void 0:F.toName,toAddress:null===be||void 0===be||null===(G=be.deliveryInfo)||void 0===G?void 0:G.toAddress,toPhone:null===be||void 0===be||null===(V=be.deliveryInfo)||void 0===V?void 0:V.toPhone},shippInfo:{deliveryCode:null===be||void 0===be||null===(B=be.deliveryInfo)||void 0===B?void 0:B.deliveryCode,deliveryNo:null===be||void 0===be||null===(H=be.deliveryInfo)||void 0===H?void 0:H.deliveryNo,deliveryStatus:null===be||void 0===be||null===(J=be.orderInfo)||void 0===J?void 0:J.deliveryStatus,deliveryUser:null===be||void 0===be||null===(K=be.deliveryInfo)||void 0===K?void 0:K.deliveryUser,deliveryPhone:null===be||void 0===be||null===(Q=be.deliveryInfo)||void 0===Q?void 0:Q.deliveryPhone},deliverySupplyer:oe&&(null===oe||void 0===oe?void 0:oe.deliverySupplyer),deliveryStatusDict:oe&&(null===oe||void 0===oe?void 0:oe.deliveryStatus)})]}),(0,w.jsxs)("div",{className:k.Z["perscript-info"],children:[(0,w.jsx)(m.Z,{clas:k.Z.mb12,payInfo:null===be||void 0===be?void 0:be.orderInfo}),(0,w.jsx)(Z.Z,{perscript:null===be||void 0===be?void 0:be.prescriptionInfo,createTime:null===be||void 0===be||null===(W=be.orderInfo)||void 0===W?void 0:W.createTime,isCalc:(null===be||void 0===be?void 0:be.currentStatus)&&!_[null===be||void 0===be?void 0:be.currentStatus],patientName:null===be||void 0===be||null===(X=be.patientInfo)||void 0===X?void 0:X.name})]})]}),null!==be&&void 0!==be&&be.currentStatus&&!_[null===be||void 0===be?void 0:be.currentStatus]?null:(0,w.jsx)(c.Z,{formType:me,type:null===be||void 0===be||null===(Y=be.orderInfo)||void 0===Y?void 0:Y.deliveryCategory,status:null===be||void 0===be?void 0:be.currentStatus,cancelOrder:function(){N({title:"\u662f\u5426\u53d6\u6d88\u8be5\u8ba2\u5355?",icon:(0,w.jsx)(s.Z,{}),onOk:function(){var e=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.C7)(he);case 2:e.sent&&Ee();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCancel:function(){console.log("Cancel")}})}}),(0,w.jsx)(x.Z,(0,o.Z)((0,o.Z)({visible:ke},Ue),{},{onCancel:function(){return we(!1)}}))]})]})}},40445:function(e,n,i){i.d(n,{G:function(){return a}});var o=i(15861),r=i(29439),t=i(87757),l=i.n(t),d=i(72791),u=i(19995),a=function(e,n){var i=(0,d.useState)(0),t=(0,r.Z)(i,2),a=t[0],v=t[1],s=(0,d.useState)(!1),c=(0,r.Z)(s,2),p=c[0],f=c[1],y=(0,d.useState)([]),m=(0,r.Z)(y,2),Z=m[0],S=m[1],h=(0,d.useState)([]),I=(0,r.Z)(h,2),g=I[0],x=I[1];function b(){return(b=(0,o.Z)(l().mark((function i(){var o;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return f(!0),i.prev=1,i.next=4,(0,u.CS)(e);case 4:o=i.sent,v(null===o||void 0===o?void 0:o.total),f(!1),n?1===e.pageNo?S(null===o||void 0===o?void 0:o.records):S(Z.concat(null===o||void 0===o?void 0:o.records)):S(null===o||void 0===o?void 0:o.records),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(1),f(!1);case 13:case"end":return i.stop()}}),i,null,[[1,10]])})))).apply(this,arguments)}function C(){return(C=(0,o.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.cj)();case 2:n=e.sent,x(n),f(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.useEffect)((function(){!function(){b.apply(this,arguments)}(),function(){C.apply(this,arguments)}()}),[e]),{total:a,orderSource:Z,isLoading:p,chainSource:g}}}}]);
//# sourceMappingURL=273.c2d2812c.chunk.js.map