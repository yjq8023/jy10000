"use strict";(self.webpackChunkzmn_rx_oms_web=self.webpackChunkzmn_rx_oms_web||[]).push([[319],{4679:function(e,n,t){t.r(n),t.d(n,{default:function(){return ge}});var o=t(93433),i=t(15861),r=t(1413),l=t(29439),a=t(87757),c=t.n(a),s=t(72791),d=t(8008),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},v=t(8453),p=function(e,n){return s.createElement(v.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:u}))};p.displayName="QuestionCircleOutlined";var f=s.forwardRef(p),m=t(43504),h=t(16871),x=t(72426),y=t.n(x),g=t(14705),Z=t(50276),I=t(14614),j=t(1620),S=t(86511),C=t(95593),b=t(1072),k=t(36852),T=t(72345),w=t(70335),N="rejected-modal_kL88g",O="reason-title_d5cdT",R="reason-radio_B00Qj",_="reason-select_JgmX3",z="reason-text_MWo0W",P=t(80184),B=d.Input.TextArea,D=d.Select.Option,A=function(e){var n=e.visible,t=e.orderType,o=e.drugList,i=e.onCancel,r=e.onOk,a=(0,s.useState)(0),c=(0,l.Z)(a,2),u=c[0],v=c[1],p=(0,s.useState)([]),f=(0,l.Z)(p,2),m=f[0],h=f[1],x=(0,s.useState)(""),y=(0,l.Z)(x,2),g=y[0],Z=y[1];return(0,s.useEffect)((function(){v(0),h([]),Z("")}),[n]),(0,P.jsx)(w.Z,{visible:n,closable:!1,tipTitle:"\u5ba1\u6838\u4e0d\u901a\u8fc7\uff0c\u9a73\u56de\u5904\u65b9",width:"540px",orderType:t,maskClosable:!1,okButtonProps:{type:"warning"},cancelButtonProps:{type:"info"},onOk:function(){0!==u?1!==u||m.length?4!==u||""!==g.trim()?r(function(){switch(u){case 1:return"\u836f\u54c1\u7f3a\u5931: ".concat(null===o||void 0===o?void 0:o.map((function(e){return e.name})).join(","));case 2:return"\u836f\u54c1\u89c4\u683c\u4e0d\u7b26\u5408";case 3:return"\u4e0d\u7b26\u5408\u914d\u4f0d\u7981\u5fcc";case 4:return"\u5176\u4ed6: ".concat(g);default:return""}}()):d.message.error("\u8bf7\u586b\u5199\u7406\u7531"):d.message.error("\u8bf7\u9009\u62e9\u7f3a\u5931\u7684\u836f\u54c1"):d.message.error("\u8bf7\u9009\u62e9\u53d6\u6d88\u539f\u56e0")},onCancel:function(){return i()},children:(0,P.jsxs)("div",{className:N,children:[(0,P.jsx)("div",{className:O,children:"\u5c06\u901a\u77e5\u533b\u5e08\u8c03\u6574\u6216\u91cd\u65b0\u5f00\u65b9\uff0c\u5df2\u652f\u4ed8\u91d1\u989d\u539f\u8def\u9000\u8fd8\u3002\u4e0d\u901a\u8fc7\u539f\u56e0\uff1a"}),(0,P.jsx)(d.Radio.Group,{className:R,onChange:function(e){return v(e.target.value)},children:(0,P.jsxs)(d.Space,{direction:"vertical",children:[(0,P.jsx)(d.Radio,{value:1,children:(0,P.jsx)("span",{children:"\u836f\u5e97\u7f3a\u836f"})}),(0,P.jsx)(d.Radio,{value:2,children:"\u836f\u54c1\u89c4\u683c\u4e0d\u7b26\u5408"}),(0,P.jsx)(d.Radio,{value:3,children:"\u4e0d\u7b26\u5408\u914d\u4f0d\u7981\u5fcc"}),(0,P.jsx)(d.Radio,{value:4,children:(0,P.jsx)("span",{children:"\u5176\u4ed6"})})]})}),(0,P.jsx)(d.Select,{mode:"multiple",size:"large",placeholder:"\u8bf7\u9009\u62e9",className:_,maxTagCount:"responsive",disabled:1!==u,onChange:function(e){h(e)},children:null===o||void 0===o?void 0:o.map((function(e){return(0,P.jsx)(D,{value:null===e||void 0===e?void 0:e.commonName,children:null===e||void 0===e?void 0:e.name},e.commonName)}))}),(0,P.jsx)(B,{className:z,disabled:4!==u,autoSize:{minRows:4,maxRows:5},onChange:function(e){return Z(e.target.value)}})]})})},E="rejected-modal_PcTaB",L="reason-title_AgP5R",M="reason-radio_BjN3l",F="reason-select_Q0CkF",U="reason-text_CV4dg",Q=d.Input.TextArea,V=d.Select.Option,q=function(e){var n=e.visible,t=e.orderType,o=e.drugList,i=e.onCancel,r=e.onOk,a=(0,s.useState)(0),c=(0,l.Z)(a,2),u=c[0],v=c[1],p=(0,s.useState)([]),f=(0,l.Z)(p,2),m=f[0],h=f[1],x=(0,s.useState)(""),y=(0,l.Z)(x,2),g=y[0],Z=y[1];return(0,s.useEffect)((function(){v(0),h([]),Z("")}),[n]),(0,P.jsx)(w.Z,{visible:n,closable:!1,tipTitle:"\u53d6\u6d88\u8ba2\u5355",width:"540px",orderType:t,maskClosable:!1,okButtonProps:{type:"warning"},cancelButtonProps:{type:"info"},onOk:function(){0!==u?1!==u||m.length?3!==u||""!==g.trim()?r(function(){switch(u){case 1:return"\u836f\u54c1\u7f3a\u5931: ".concat(null===m||void 0===m?void 0:m.join(","));case 2:return"\u6536\u8d27\u4eba\u62d2\u5355";case 3:return"\u5176\u4ed6: ".concat(g);default:return""}}()):d.message.error("\u8bf7\u586b\u5199\u7406\u7531"):d.message.error("\u8bf7\u9009\u62e9\u7f3a\u5931\u7684\u836f\u54c1"):d.message.error("\u8bf7\u9009\u62e9\u53d6\u6d88\u539f\u56e0")},onCancel:function(){return i()},children:(0,P.jsxs)("div",{className:E,children:[(0,P.jsx)("div",{className:L,children:"\u5c06\u901a\u77e5\u533b\u5e08\u8c03\u6574\u6216\u91cd\u65b0\u5f00\u65b9\uff0c\u5df2\u652f\u4ed8\u91d1\u989d\u539f\u8def\u9000\u8fd8\u3002\u53d6\u6d88\u539f\u56e0\uff1a"}),(0,P.jsx)(d.Radio.Group,{className:M,onChange:function(e){return v(e.target.value)},children:(0,P.jsxs)(d.Space,{direction:"vertical",children:[(0,P.jsx)(d.Radio,{value:1,children:(0,P.jsx)("span",{children:"\u836f\u54c1\u7834\u635f"})}),(0,P.jsx)(d.Radio,{value:2,children:"\u6536\u8d27\u4eba\u62d2\u5355"}),(0,P.jsx)(d.Radio,{value:3,children:(0,P.jsx)("span",{children:"\u5176\u4ed6"})})]})}),(0,P.jsx)(d.Select,{mode:"multiple",size:"large",placeholder:"\u8bf7\u9009\u62e9",className:F,maxTagCount:"responsive",disabled:1!==u,onChange:function(e){h(e)},children:null===o||void 0===o?void 0:o.map((function(e){return(0,P.jsx)(V,{value:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},e.commonName)}))}),(0,P.jsx)(Q,{placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9",className:U,disabled:3!==u,autoSize:{minRows:4,maxRows:5},onChange:function(e){return Z(e.target.value)}})]})})},W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},$=function(e,n){return s.createElement(v.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:W}))};$.displayName="CheckCircleOutlined";var G=s.forwardRef($),J=function(e){var n=e.visible,t=e.tipTitle,o=e.width,i=void 0===o?"420px":o,r=e.okText,l=void 0===r?"\u597d\u7684":r,a=e.icon,c=void 0===a?(0,P.jsx)(G,{style:{color:"#7ED321",marginRight:16,fontSize:24}}):a,s=e.onOk,d=e.onCancel;return(0,P.jsx)(w.Z,{visible:n,closable:!1,tipTitle:t,width:i,icon:c,okText:l,maskClosable:!1,cancelButtonProps:{type:"info"},onOk:function(){s()},onCancel:function(){return d()}})},H=(d.Select.Option,function(e){var n=e.visible,t=e.orderType,o=e.title,i=void 0===o?"\u662f\u5426\u786e\u5b9a\u914d\u9001\uff1f":o,r=e.onOk,l=e.onCancel;return(0,P.jsx)(w.Z,{visible:n,closable:!1,width:"420px",orderType:t,maskClosable:!1,icon:(0,P.jsx)(f,{style:{color:"#FFC100",fontSize:24,marginRight:16}}),tipTitle:i,onOk:function(){return r()},onCancel:function(){return l()}})}),K="rejected-modal_tMW_B",X="reason-title_DowCm",Y="reason-radio_QbFsy",ee="reason-select_QYDly",ne="reason-text_n_4Rw",te=d.Input.TextArea,oe=d.Select.Option,ie=function(e){var n=e.visible,t=e.orderType,o=e.drugList,i=e.onCancel,r=e.onOk,a=(0,s.useState)(0),c=(0,l.Z)(a,2),u=c[0],v=c[1],p=(0,s.useState)([]),f=(0,l.Z)(p,2),m=f[0],h=f[1],x=(0,s.useState)(""),y=(0,l.Z)(x,2),g=y[0],Z=y[1];return(0,s.useEffect)((function(){v(0),h([]),Z("")}),[n]),(0,P.jsx)(w.Z,{visible:n,closable:!1,tipTitle:"\u53d6\u6d88\u914d\u9001",width:"540px",orderType:t,maskClosable:!1,okButtonProps:{type:"warning"},cancelButtonProps:{type:"info"},onOk:function(){0!==u?1!==u||m.length?3!==u||""!==g.trim()?r(function(){switch(u){case 1:return"\u836f\u54c1\u7f3a\u5931: ".concat(null===m||void 0===m?void 0:m.join(","));case 2:return"\u7b49\u5019\u8d85\u65f6";case 3:return"\u5176\u4ed6: ".concat(g);default:return""}}()):d.message.error("\u8bf7\u586b\u5199\u7406\u7531"):d.message.error("\u8bf7\u9009\u62e9\u7f3a\u5931\u7684\u836f\u54c1"):d.message.error("\u8bf7\u9009\u62e9\u53d6\u6d88\u539f\u56e0")},onCancel:function(){return i()},children:(0,P.jsxs)("div",{className:K,children:[(0,P.jsx)("div",{className:X,children:"\u5c06\u901a\u77e5\u533b\u5e08\u8c03\u6574\u6216\u91cd\u65b0\u5f00\u65b9\uff0c\u5df2\u652f\u4ed8\u91d1\u989d\u539f\u8def\u9000\u8fd8\u3002\u53d6\u6d88\u539f\u56e0\uff1a"}),(0,P.jsx)(d.Radio.Group,{value:u,className:Y,onChange:function(e){return v(e.target.value)},children:(0,P.jsxs)(d.Space,{direction:"vertical",children:[(0,P.jsx)(d.Radio,{value:1,children:(0,P.jsx)("span",{children:"\u836f\u54c1\u7f3a\u836f"})}),(0,P.jsx)(d.Radio,{value:2,children:"\u7b49\u5019\u8d85\u65f6"}),(0,P.jsx)(d.Radio,{value:3,children:(0,P.jsx)("span",{children:"\u5176\u4ed6"})})]})}),(0,P.jsx)(d.Select,{mode:"multiple",size:"large",placeholder:"\u8bf7\u9009\u62e9",disabled:1!==u,className:ee,maxTagCount:"responsive",onChange:function(e){console.log(e),h(e)},children:null===o||void 0===o?void 0:o.map((function(e){return(0,P.jsx)(oe,{value:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},e.commonName)}))}),(0,P.jsx)(te,{placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9",disabled:3!==u,className:ne,autoSize:{minRows:4,maxRows:5},onChange:function(e){return Z(e.target.value)}})]})})},re=t(13819),le=function(e){var n=e.visible,t=e.tipTitle,o=e.width,i=void 0===o?"420px":o,r=e.okText,l=void 0===r?"\u597d\u7684":r,a=e.icon,c=void 0===a?(0,P.jsx)(re.Z,{style:{color:"#FFBF00",fontSize:24}}):a,s=e.onOk,d=e.onCancel;return(0,P.jsx)(w.Z,{visible:n,closable:!1,tipTitle:t,width:i,icon:c,okText:l,maskClosable:!1,cancelButtonProps:{type:"info"},onOk:function(){s()},onCancel:function(){return d()}})},ae=t(35796),ce=function(e){var n=e.visible,t=e.tipTitle,o=e.width,i=void 0===o?"420px":o,r=e.okText,l=void 0===r?"\u597d\u7684":r,a=e.icon,c=void 0===a?(0,P.jsx)(ae.Z,{style:{color:"#217ba0",marginRight:16,fontSize:24}}):a,s=e.onOk,d=e.onCancel;return(0,P.jsx)(w.Z,{visible:n,closable:!1,tipTitle:t,width:i,icon:c,okText:l,cancelText:null,maskClosable:!1,cancelButtonProps:{type:"info"},onOk:function(){s()},onCancel:function(){return d&&d()}})},se=t(37942),de=t(13317),ue=t(19995),ve=t(7711),pe=t(89672),fe=t(90252),me=t(15004),he=t(99940),xe=d.Modal.confirm,ye={rejected:!0,finished:!0,delivering:!0},ge=function(){var e,n,t,a,u,v,p,x,w,N,O,R,_,z,B,D,E,L,M,F,U,Q,V,W,$,G,K,X,Y,ee,ne,te,oe,re,ae,ge,Ze=(0,s.useState)(!1),Ie=(0,l.Z)(Ze,2),je=Ie[0],Se=Ie[1],Ce=(0,m.lr)(),be=(0,l.Z)(Ce,1)[0],ke=(0,me.Z)().socket,Te=be.getAll("id")[0],we=(0,fe.V)().dictList,Ne=(0,pe.z5)(Te,je),Oe=Ne.interaction,Re=Ne.interactionTip,_e=Ne.avoid,ze=Ne.avoidTip,Pe=Ne.beyondIndication,Be=Ne.repeatMedication,De=Ne.repeatMedicationTip,Ae=Ne.remarkCode,Ee=Ne.errorCode,Le=(be.getAll("from")[0],"revieOrder"),Me=be.getAll("type")[0],Fe=(0,s.useRef)(null),Ue=(0,h.s0)(),Qe=(0,s.useState)([]),Ve=(0,l.Z)(Qe,2),qe=Ve[0],We=Ve[1],$e=(0,s.useState)(),Ge=(0,l.Z)($e,2),Je=Ge[0],He=Ge[1],Ke=(0,s.useState)(0),Xe=(0,l.Z)(Ke,2),Ye=Xe[0],en=Xe[1],nn=(0,s.useState)(!1),tn=(0,l.Z)(nn,2),on=tn[0],rn=tn[1],ln=(0,s.useState)(!0),an=(0,l.Z)(ln,2),cn=an[0],sn=an[1],dn=(0,s.useState)(!1),un=(0,l.Z)(dn,2),vn=un[0],pn=un[1],fn=(0,s.useState)(0),mn=(0,l.Z)(fn,2),hn=mn[0],xn=mn[1],yn=(0,s.useState)(""),gn=(0,l.Z)(yn,2),Zn=gn[0],In=gn[1],jn=(0,s.useState)(!1),Sn=(0,l.Z)(jn,2),Cn=Sn[0],bn=Sn[1],kn=(0,s.useState)(!1),Tn=(0,l.Z)(kn,2),wn=Tn[0],Nn=Tn[1],On=(0,s.useState)(!1),Rn=(0,l.Z)(On,2),_n=Rn[0],zn=Rn[1],Pn=(0,s.useState)(!1),Bn=(0,l.Z)(Pn,2),Dn=Bn[0],An=Bn[1],En=(0,s.useState)(!1),Ln=(0,l.Z)(En,2),Mn=Ln[0],Fn=Ln[1],Un=(0,s.useState)(!1),Qn=(0,l.Z)(Un,2),Vn=Qn[0],qn=Qn[1],Wn=(0,s.useState)(!1),$n=(0,l.Z)(Wn,2),Gn=$n[0],Jn=$n[1],Hn=(0,s.useState)(!1),Kn=(0,l.Z)(Hn,2),Xn=Kn[0],Yn=Kn[1],et=(0,s.useState)(!1),nt=(0,l.Z)(et,2),tt=nt[0],ot=nt[1],it=(0,s.useState)(!1),rt=(0,l.Z)(it,2),lt=rt[0],at=rt[1],ct=(0,s.useState)({}),st=(0,l.Z)(ct,2),dt=st[0],ut=st[1],vt=(0,s.useState)({pageNo:1,pageSize:50,entity:{selectTab:Me},orders:[{property:"create_time",direction:"asc"}]}),pt=(0,l.Z)(vt,2),ft=pt[0],mt=pt[1],ht=function(){"wait"===Me&&mt((0,r.Z)((0,r.Z)({},ft),{},{pageNo:1}))};function xt(){return yt.apply(this,arguments)}function yt(){return(yt=(0,i.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pn(!0),sn(!0),e.prev=2,e.next=5,(0,ue.Kk)(ft);case 5:n=e.sent,en(null===n||void 0===n?void 0:n.total),"wait"===Me&&n.records.length>0&&(n.records.forEach((function(e){e.timeout=(0,pe.$4)(e.createTime,e.deliveryCategory)})),console.log(n)),(0,he.$1)("ContinueNext")?n.records.length>0?Ue("/prescrip/order/reviewDetail?id=".concat(n.records[0].id,"&type=").concat(Me)):gt():on&&n.records.length>0?(rn(!1),Ue("/prescrip/order/reviewDetail?id=".concat(n.records[0].id,"&type=").concat(Me))):gt(Te),pn(!1),1===ft.pageNo?We((0,o.Z)(null===n||void 0===n?void 0:n.records)):We(qe.concat(null===n||void 0===n?void 0:n.records)),sn(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),sn(!1);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function gt(){return Zt.apply(this,arguments)}function Zt(){return Zt=(0,i.Z)(c().mark((function e(){var n,t,o,i,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:"",clearTimeout(Fe.current),e.prev=2,e.next=5,(0,ue.jD)(n||Te);case 5:t=e.sent,sn(!1),o={O2O:"minutes",B2C:"hours"},i={O2O:500,B2C:500},"wait"===Me&&(Fe.current=setInterval((function(){xn(y()(Date.now()).diff(t.orderInfo.createTime,o[t.orderInfo.deliveryCategory]))}),i[t.orderInfo.deliveryCategory])),He(t),rn(!1),(0,he.lE)("ContinueNext",!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),sn(!1);case 18:case"end":return e.stop()}}),e,null,[[2,15]])}))),Zt.apply(this,arguments)}function It(){return(It=(0,i.Z)(c().mark((function e(n){var t,o,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ue.Ot)(n);case 3:t=e.sent,o=t.common_name,i=t.content,at(!0),ut((0,r.Z)({commonName:o},i)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),at(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function jt(e){return St.apply(this,arguments)}function St(){return(St=(0,i.Z)(c().mark((function e(n){var t,o,i,l,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qn(!1),bn(!1),e.prev=2,t=(null===Je||void 0===Je?void 0:Je.orderInfo)||{},o=t.chainId,i=t.id,l=t.storeId,e.next=6,(0,ue.kI)((0,r.Z)((0,r.Z)({},n),{},{chainId:o,orderId:i,storeId:l}));case 6:200===e.sent.code&&(a={reject:"\u5904\u65b9\u5df2\u9a73\u56de",delivery_wait:"\u5904\u65b9\u5ba1\u6838\u6210\u529f",pass_verify:"\u5904\u65b9\u5ba1\u6838\u6210\u529f"},An(!0),In(a[n.verifyStatus])),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),sn(!1);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var Ct=function(){var e=(0,i.Z)(c().mark((function e(n){var t,o,i,r,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sn(!0),t=(null===Je||void 0===Je?void 0:Je.orderInfo)||{},o=t.chainId,i=t.id,r=t.storeId,e.prev=2,e.next=5,(0,ue.$P)({chainId:o,orderId:i,clientId:r,cancelReason:n});case 5:l=e.sent,zn(!1),200===l.code&&(An(!0),In("\u8ba2\u5355\u5df2\u53d6\u6d88\u914d\u9001")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),zn(!1),1000009===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?(In("\u5f53\u524d\u8ba2\u5355\u72b6\u6001\u6709\u66f4\u65b0"),ot(!0)):sn(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}(),bt=function(){var e=(0,i.Z)(c().mark((function e(){var n,t,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.message.loading("\u6570\u636e\u6b63\u5728\u5904\u7406\u4e2d, \u8bf7\u7a0d\u5019...",0),e.prev=1,e.next=4,(0,ue.u)(Te);case 4:t=e.sent,console.log(t),200===t.code?o=setTimeout((function(){n(),clearTimeout(o),In("\u6a21\u62df\u5f02\u5e38\u914d\u9001\u6210\u529f"),An(!0)}),3e3):(n(),d.message.error("\u6a21\u62df\u5f02\u5e38\u914d\u9001\u5931\u8d25"),sn(!1),gt()),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n(),1000009===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?(In("\u5f53\u524d\u8ba2\u5355\u72b6\u6001\u6709\u66f4\u65b0"),ot(!0)):sn(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),kt=function(){var e=(0,i.Z)(c().mark((function e(){var n,t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.message.loading("\u6570\u636e\u6b63\u5728\u5904\u7406\u4e2d, \u8bf7\u7a0d\u5019...",0),e.prev=1,e.next=4,(0,ue.B5)(Te);case 4:200===e.sent.code?t=setTimeout((function(){n(),clearTimeout(t),In("\u6a21\u62df\u5b8c\u6210\u8ba2\u5355\u6210\u529f"),An(!0)}),3e3):(n(),d.message.error("\u6a21\u62df\u5b8c\u6210\u8ba2\u5355\u5931\u8d25"),gt()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n(),1000009===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?(In("\u5f53\u524d\u8ba2\u5355\u72b6\u6001\u6709\u66f4\u65b0"),ot(!0)):sn(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),Tt=function(){var e=(0,i.Z)(c().mark((function e(){var n,t,o,i,r,l,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(null===Je||void 0===Je?void 0:Je.orderInfo)||{},t=n.chainId,o=n.id,i=n.storeId,r=d.message.loading("\u6570\u636e\u6b63\u5728\u5904\u7406\u4e2d, \u8bf7\u7a0d\u5019...",0),Xn){e.next=19;break}return sn(!0),Fn(!1),e.prev=5,e.next=8,(0,ue.JR)({chainId:t,orderId:o,clientId:i});case 8:l=e.sent,console.log(l),200===l.code?a=setTimeout((function(){r(),clearTimeout(a),An(!0),In("\u8ba2\u5355\u5df2\u91cd\u65b0\u914d\u9001")}),3e3):(r(),sn(!1)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),r(),1000009===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?(In("\u5f53\u524d\u8ba2\u5355\u72b6\u6001\u6709\u66f4\u65b0"),ot(!0)):sn(!1);case 17:e.next=34;break;case 19:return Fn(!1),sn(!0),e.prev=21,e.next=24,(0,ue.Ir)({chainId:t,orderId:o,clientId:i});case 24:200===e.sent.code&&(An(!0),In("\u914d\u9001\u6210\u529f")),r(),e.next=34;break;case 29:e.prev=29,e.t1=e.catch(21),r(),Fn(!1),1000009===(null===e.t1||void 0===e.t1?void 0:e.t1.code)?(In("\u5f53\u524d\u8ba2\u5355\u72b6\u6001\u6709\u66f4\u65b0"),ot(!0)):sn(!1);case 34:case"end":return e.stop()}}),e,null,[[5,13],[21,29]])})));return function(){return e.apply(this,arguments)}}(),wt=function(){var e=(0,i.Z)(c().mark((function e(n){var t,o,i,r,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sn(!0),e.prev=1,t=(null===Je||void 0===Je?void 0:Je.orderInfo)||{},o=t.chainId,i=t.id,r=t.storeId,e.next=5,(0,ue.AQ)({chainId:o,orderId:i,clientId:r,reason:n});case 5:l=e.sent,Nn(!1),200===l.code&&(An(!0),In("\u8ba2\u5355\u53d6\u6d88\u6210\u529f")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),Nn(!1),1000009===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?(In("\u5f53\u524d\u8ba2\u5355\u72b6\u6001\u6709\u66f4\u65b0"),ot(!0)):sn(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}(),Nt=function(){ot(!1),(0,he.lE)("ContinueNext",!1),xt()},Ot=function(){var e=(0,i.Z)(c().mark((function e(n){var t,o,i,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.message.loading("\u6570\u636e\u6b63\u5728\u5904\u7406\u4e2d, \u8bf7\u7a0d\u5019...",0),sn(!0),e.prev=2,e.next=5,(0,ue.ro)((0,r.Z)((0,r.Z)({},n),{},{orderId:null===Je||void 0===Je||null===(o=Je.orderInfo)||void 0===o?void 0:o.id}));case 5:200===(null===(i=e.sent)||void 0===i?void 0:i.code)?l=setTimeout((function(){d.message.success("\u5f55\u5165\u6210\u529f"),t(),sn(!1),gt(),clearTimeout(l)}),3e3):(gt(),t(),d.message.warn("\u5f55\u5165\u5931\u8d25, \u8bf7\u91cd\u8bd5")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),t(),1000009===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?(In("\u5f53\u524d\u8ba2\u5355\u72b6\u6001\u6709\u66f4\u65b0"),ot(!0)):sn(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){return xt(),function(){(0,he.s$)("ContinueNext"),clearTimeout(Fe.current)}}),[ft,Te]),(0,s.useEffect)((function(){return null===ke||void 0===ke||ke.addEventListener("ADD",ht),function(){return null===ke||void 0===ke?void 0:ke.removeEventListener("ADD",ht)}})),(0,P.jsx)(d.Spin,{spinning:cn,tip:"\u6570\u636e\u6b63\u5728\u62fc\u547d\u52a0\u8f7d\u4e2d, \u8bf7\u7a0d\u5019...",delay:500,children:(0,P.jsxs)("div",{className:ve.Z["order-container"],children:[(0,P.jsx)(k.Z,{list:qe,loading:vn,total:Ye,delivDict:we?we.deliveryStatus:{},tab:Me,formType:Le,height:"calc(100vh - 170px)",id:Te,onScroll:function(){clearTimeout(Fe.current),mt((0,r.Z)((0,r.Z)({},ft),{},{pageNo:ft.pageNo+1}))},onTab:function(e){clearTimeout(Fe.current),mt((0,r.Z)((0,r.Z)({},ft),{},{pageNo:1,entity:{selectTab:e}})),rn(!0)},onChange:function(e){clearTimeout(Fe.current),Ue("/prescrip/order/reviewDetail?id=".concat(e,"&type=").concat(Me))},onSearch:function(e){mt((0,r.Z)((0,r.Z)({},ft),{},{pageNo:1,entity:(0,r.Z)((0,r.Z)({},ft.entity),{},{simpleSearch:e})}))}}),(0,P.jsxs)("div",{className:ve.Z["perscript-container"],children:[(0,P.jsx)(de.Z,{breadcrumbMap:[{label:"\u5904\u65b9\u6d41\u8f6c"},{label:"\u5904\u65b9\u7ba1\u7406"},{label:"\u5ba1\u65b9\u8ba2\u5355",link:"/prescrip/order/list"},{label:"\u8ba2\u5355\u8be6\u60c5"}],link:"/prescrip/order/list"}),(0,P.jsx)(T.Z,{clas:ve.Z.mb12,patient:null===Je||void 0===Je?void 0:Je.patientInfo,delivery:null===Je||void 0===Je?void 0:Je.deliveryInfo}),(0,P.jsxs)("div",{className:ve.Z.container,children:[(0,P.jsxs)("div",{className:"".concat(ve.Z["left-container"]," ").concat(null!==Je&&void 0!==Je&&Je.currentStatus&&ye[null===Je||void 0===Je?void 0:Je.currentStatus]?ve.Z["left-container-calc"]:""),children:[(0,P.jsx)(j.Z,{clas:ve.Z.mb12,id:null===Je||void 0===Je||null===(e=Je.orderInfo)||void 0===e?void 0:e.id,tip:hn,processStatus:null===Je||void 0===Je?void 0:Je.processStatus,receiveTime:null===Je||void 0===Je||null===(n=Je.orderInfo)||void 0===n?void 0:n.receiveTime,doctor:null===Je||void 0===Je||null===(t=Je.prescriptionInfo)||void 0===t?void 0:t.doctor,pCreateTime:null===Je||void 0===Je||null===(a=Je.orderInfo)||void 0===a?void 0:a.createTime,dispensePharmacist:null===Je||void 0===Je||null===(u=Je.prescriptionInfo)||void 0===u?void 0:u.dispensePharmacist,createTime:null===Je||void 0===Je||null===(v=Je.deliveryInfo)||void 0===v?void 0:v.updateTime,auditPharmacist:null===Je||void 0===Je||null===(p=Je.prescriptionInfo)||void 0===p?void 0:p.auditPharmacist,deliveryUser:null===Je||void 0===Je||null===(x=Je.deliveryInfo)||void 0===x?void 0:x.deliveryUser,signTime:null===Je||void 0===Je||null===(w=Je.deliveryInfo)||void 0===w?void 0:w.signTime,sourceTime:null===Je||void 0===Je||null===(N=Je.prescriptionInfo)||void 0===N?void 0:N.sourceTime,signUser:null===Je||void 0===Je||null===(O=Je.deliveryInfo)||void 0===O?void 0:O.signUser,currentStatus:null===Je||void 0===Je?void 0:Je.currentStatus,message:null===Je||void 0===Je||null===(R=Je.orderInfo)||void 0===R?void 0:R.message,invalidReason:null===Je||void 0===Je||null===(_=Je.orderInfo)||void 0===_?void 0:_.invalidReason,deliveryCategory:null===Je||void 0===Je||null===(z=Je.orderInfo)||void 0===z?void 0:z.deliveryCategory,formType:Le,currentStatusDict:we?we.OrderCurrentStatus:{}}),(0,P.jsx)(I.Z,{clas:ve.Z.mb12,totalAmount:null===Je||void 0===Je||null===(B=Je.orderInfo)||void 0===B?void 0:B.totalAmount,deliveryAmount:null===Je||void 0===Je||null===(D=Je.orderInfo)||void 0===D?void 0:D.deliveryAmount,drugList:null===Je||void 0===Je||null===(E=Je.prescriptionInfo)||void 0===E?void 0:E.drugList,currentStatus:null===Je||void 0===Je?void 0:Je.currentStatus,drugFrequency:we?we.drugFrequency:{},drugUsage:we?we.drugUsage:{}}),(0,P.jsx)(b.Z,{clas:ve.Z.mb12,currentStatus:null===Je||void 0===Je?void 0:Je.currentStatus,interaction:Oe||[],interactionTip:Re,avoid:_e||[],avoidTip:ze,beyondIndication:Pe||[],repeatMedication:Be||[],repeatMedicationTip:De,remarkCode:Ae,errorCode:Ee,onDrug:function(e){return function(e){return It.apply(this,arguments)}(e)},onReload:function(){return Se(!je)}}),(0,P.jsx)(Z.Z,{receiptInfo:{toName:null===Je||void 0===Je||null===(L=Je.deliveryInfo)||void 0===L?void 0:L.toName,toAddress:null===Je||void 0===Je||null===(M=Je.deliveryInfo)||void 0===M?void 0:M.toAddress,toPhone:null===Je||void 0===Je||null===(F=Je.deliveryInfo)||void 0===F?void 0:F.toPhone,orderId:null===Je||void 0===Je||null===(U=Je.deliveryInfo)||void 0===U?void 0:U.orderId},code:null===Je||void 0===Je||null===(Q=Je.deliveryInfo)||void 0===Q?void 0:Q.deliveryCode,shippInfo:{deliveryCode:null===Je||void 0===Je||null===(V=Je.deliveryInfo)||void 0===V?void 0:V.deliveryCode,deliveryNo:null===Je||void 0===Je||null===(W=Je.deliveryInfo)||void 0===W?void 0:W.deliveryNo,deliveryStatus:null===Je||void 0===Je||null===($=Je.orderInfo)||void 0===$?void 0:$.deliveryStatus,deliveryUser:null===Je||void 0===Je||null===(G=Je.deliveryInfo)||void 0===G?void 0:G.deliveryUser,deliveryPhone:null===Je||void 0===Je||null===(K=Je.deliveryInfo)||void 0===K?void 0:K.deliveryPhone,orderId:null===Je||void 0===Je||null===(X=Je.deliveryInfo)||void 0===X?void 0:X.orderId,deliverySource:null===Je||void 0===Je||null===(Y=Je.deliveryInfo)||void 0===Y?void 0:Y.deliverySource},formType:Le,deliverySupplyer:we?null===we||void 0===we?void 0:we.deliverySupplyer:{},deliveryStatusDict:we?null===we||void 0===we?void 0:we.deliveryStatus:{},deliverySource:null===Je||void 0===Je||null===(ee=Je.deliveryInfo)||void 0===ee?void 0:ee.deliverySource,status:null===Je||void 0===Je?void 0:Je.currentStatus,entry:function(e){return Ot(e)},finsh:function(){return sn(!0),void xe({icon:(0,P.jsx)(f,{}),content:"\u662f\u5426\u624b\u52a8\u786e\u8ba4\u6536\u8d27?",centered:!0,onOk:function(){var e=(0,i.Z)(c().mark((function e(){var n,t,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.message.loading("\u6570\u636e\u6b63\u5728\u5904\u7406\u4e2d, \u8bf7\u7a0d\u5019...",0),e.prev=1,e.next=4,(0,ue.iC)(null===Je||void 0===Je||null===(t=Je.orderInfo)||void 0===t?void 0:t.id);case 4:200===e.sent.code?o=setTimeout((function(){n(),An(!0),In("\u914d\u9001\u5df2\u5b8c\u6210"),clearTimeout(o)}),3e3):(n(),gt(),sn(!1),d.message.warn("\u5f55\u5165\u5931\u8d25, \u8bf7\u91cd\u8bd5")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n(),1000009===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?(In("\u5f53\u524d\u8ba2\u5355\u72b6\u6001\u6709\u66f4\u65b0"),ot(!0)):sn(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),onCancel:function(){console.log("Cancel"),sn(!1)}})}})]}),(0,P.jsxs)("div",{className:ve.Z["perscript-info"],children:[(0,P.jsx)(S.Z,{clas:ve.Z.mb12,payInfo:null===Je||void 0===Je?void 0:Je.orderInfo}),(0,P.jsx)(C.Z,{perscript:null===Je||void 0===Je?void 0:Je.prescriptionInfo,createTime:null===Je||void 0===Je||null===(ne=Je.orderInfo)||void 0===ne?void 0:ne.createTime,isCalc:(null===Je||void 0===Je?void 0:Je.currentStatus)&&ye[null===Je||void 0===Je?void 0:Je.currentStatus],patientName:null===Je||void 0===Je||null===(te=Je.patientInfo)||void 0===te?void 0:te.name})]})]}),null!==Je&&void 0!==Je&&Je.currentStatus&&ye[null===Je||void 0===Je?void 0:Je.currentStatus]?null:(0,P.jsx)(g.Z,{formType:Le,type:null===Je||void 0===Je||null===(oe=Je.orderInfo)||void 0===oe?void 0:oe.deliveryCategory,status:null===Je||void 0===Je?void 0:Je.currentStatus,reject:function(){bn(!0),sn(!0)},passNow:function(){qn(!0),sn(!0),In("\u662f\u5426\u5ba1\u6838\u901a\u8fc7\uff0c\u7acb\u5373\u914d\u9001"),Jn(!1)},passWait:function(){qn(!0),In("\u662f\u5426\u5ba1\u6838\u901a\u8fc7\uff0c\u7a0d\u540e\u914d\u9001"),sn(!0),Jn(!0)},reDelivery:function(){sn(!0),Fn(!0),Yn(!1)},cancelDelivery:function(){zn(!0),sn(!0)},exception:function(){sn(!0),bt()},rePrescribe:function(){sn(!0),Nn(!0)},delivery:function(){sn(!0),Fn(!0),Yn(!0)},completion:function(){sn(!0),kt()}})]}),Cn?(0,P.jsx)(A,{visible:Cn,drugList:null===Je||void 0===Je||null===(re=Je.prescriptionInfo)||void 0===re?void 0:re.drugList,onCancel:function(){bn(!1),sn(!1)},onOk:function(e){jt({verifyStatus:"reject",rejectedReason:e})}}):null,Vn?(0,P.jsx)(le,{visible:Vn,tipTitle:Zn,okText:"\u786e\u5b9a",onCancel:function(){qn(!1),sn(!1)},onOk:function(){jt({verifyStatus:Gn?"delivery_wait":"pass_verify"})}}):null,wn?(0,P.jsx)(q,{visible:wn,drugList:null===Je||void 0===Je||null===(ae=Je.prescriptionInfo)||void 0===ae?void 0:ae.drugList,onCancel:function(){Nn(!1),sn(!1)},onOk:function(e){return wt(e)}}):null,_n?(0,P.jsx)(ie,{visible:_n,drugList:null===Je||void 0===Je||null===(ge=Je.prescriptionInfo)||void 0===ge?void 0:ge.drugList,onCancel:function(){zn(!1),sn(!1)},onOk:function(e){Ct(e)}}):null,Mn?(0,P.jsx)(H,{visible:Mn,onCancel:function(){Fn(!1),sn(!1)},onOk:function(){return Tt()}}):null,Dn?(0,P.jsx)(J,{visible:Dn,onCancel:function(){return An(!1),(0,he.lE)("ContinueNext",!1),void xt()},okText:"\u597d\u7684\uff0c\u4e0b\u4e00\u5355",onOk:function(){return An(!1),(0,he.lE)("ContinueNext",!0),void xt()},tipTitle:Zn}):null,tt?(0,P.jsx)(ce,{visible:tt,tipTitle:Zn,onOk:function(){return Nt()},onCancel:function(){return Nt()}}):null,(0,P.jsx)(se.Z,(0,r.Z)((0,r.Z)({visible:lt},dt),{},{onCancel:function(){return at(!1)}}))]})})}},13819:function(e,n,t){t.d(n,{Z:function(){return c}});var o=t(1413),i=t(72791),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 708c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm62.9-219.5a48.3 48.3 0 00-30.9 44.8V620c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-21.5c0-23.1 6.7-45.9 19.9-64.9 12.9-18.6 30.9-32.8 52.1-40.9 34-13.1 56-41.6 56-72.7 0-44.1-43.1-80-96-80s-96 35.9-96 80v7.6c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V420c0-39.3 17.2-76 48.4-103.3C430.4 290.4 470 276 512 276s81.6 14.5 111.6 40.7C654.8 344 672 380.7 672 420c0 57.8-38.1 109.8-97.1 132.5z"}}]},name:"question-circle",theme:"filled"},l=t(8453),a=function(e,n){return i.createElement(l.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:n,icon:r}))};a.displayName="QuestionCircleFilled";var c=i.forwardRef(a)}}]);
//# sourceMappingURL=319.be545fc0.chunk.js.map